## Kmom07

I utgångsläget var jag väldigt nervös för hur tentan skulle vara med tanke på att vi har tagit stora kliv i kursen och det har även påpekats hur viktig kursen är för utbildningen. Jag släppte boken för att gå igenom en gammal tenta dagen innan för att göra mig lite mer redo på vad som komma skulle och jag kan ärligt säga att jag inte hade klarat tentan lika bra om jag inte gjort det. Tidspressen hade tagit över om jag skulle behöva lägga större kraft på att bygga all JS kod som inkluderar Express och hanterar alla routes. Vi har under kursen lärt oss mycket om databaser från planering på ett konceptuellt plan till SQL-kod vi bygger en fysisk och fungerande databas med. Vi har även kodat mycket JavaScript som är av betydelse för att kunna ta steget till att implementera databasen i en webbplats för olika ändamål. Genom att göra den gamla tentamen fick jag även fundera igenom hur man gör kopplingar mellan tabeller med exempelvis en join. Det var bra att friska upp minnet lite på dom sakerna. När allt kom omkring tycker jag det gick bra även om jag kunde varit lite mer förberedd så jag hade kunnat optimera min tid lite extra och även fixat uppgift nr.3. Jag tror att uppgift nr.3 var inom räckhåll för att jag skulle klara av den men det blev knappt om tid då jag fastnade lite på utskriften av min sökfunktion och hade lite svårt att samla tankarna för att gå vidare snabbare. Jag är ändå mycket nöjd med reslutatet och tycker att det gick bättre än förväntat.

Jag använde mig av den fulla tiden och om jag inte minns helt fel lämnade jag in två gånger ca 15 minuter innan tiden var över. Jag fastnade en liten stund på utskriften av sökresultatet för webbklienten då jag kan tycka det vara svårt att hantera RowDataPackage på ett enkelt och smidigt sätt. Ibland behöver jag bara brottas lite med det för att få mina tankar på rätt plats och lösa problemet framför mig, antar att många nybörjare som jag upplever samma sak till och från.

Jag gick igenom krav 1 till 3 för eshop3 samt någon småsak extra och jag valde att göra det mer för övning och lärandets skull då jag finner databas som väldigt god kunskap att ha. I krav 1 ska man implementera log i webbklienten likt den som är i terminalklienten som visar 20 rader av logg från produktloggen. 
Jag har i den funtion som kör den lagrade proceduren anget en limit variabel som införs i proceduren och används som en limit på antal rader som ska presenteras så det blir max 20. Man ska göra ett kommando till terminalklienten som heter loggsearch där man kan söka i logghistoriken. Funktionen som kallar på den lagrade proceduren tar en input. I funktionen skrivs jokertecken till inputvariabeln framför och bakom för att det ska fungera att söka på delsträngar i loggen. Därefter skickas variabeln in i den lagrade proceduren som utför förfrågningen och returnerar ett svar via en where-sats med en rad kolumner som avgränsas med "or" för att säga att det fungerar med matching mot ett eller flera av dessa kolumner. Eftersom jag såg kopplingen mellan webb- och terminalklient införde jag ett sökformulär även i webbklienten för både produkt- och orderlogg.

Krav 2 där man kan hantera och beställa sin order i webbklienten. Via ett formulär som har ett dolt inputfällt med orderid angivet och en submit input som fungerar som knappen kan vi köra en post route. Routen ändrar statusen på orden genom att uppdatera kolumnen "ordered" men en nuvarande tidsstämpel. Vidare kan man se en full översyn av ordern med kund- och orderdetaljer med en lista på beställda produkter. Jag passerar nödvändinga id genom dynamiska-variabler i router (:variabel) för att sedan genom vårt data objekt i den route vi går till göra föfrågningar för de data vi vill åt där, ordern, kunden och plocklistan. Där efter sker utskriften på samma vis som vi pressenterat data i alla andra vyer. För de dynamiska variablerna och de routse har jag försökt tänka i djupled och bygga dem utifrån den orginalvy som vi är på, exempelvis order/3/picklist (eller kanske invoice).

I plocklistan lade jag till ett extra steg i orderstatusfunktionen “plockad” som sker via en till kolumn och tidstämpel som alla andra status. Tanken är att ibland kan en beställning komma in men föreställ dig att exempelvis har dagens transporter redan gått iväg eller något liknande så produkterna behöver vänta på nästkommande transport, här kommer statusen in och håller personalen uppdaterad om att produkterna ligger paketerade och väntar på transport. Man kan även skicka ordern och jag gjorde ett försök på att se till att mina produkter minskas på lagret även om de är utspridda och behöver plockas från olika platser. Det fungerar som det är nu men funktionalitet som ser efter vart de plockas från saknas och möjligheten at kanske prioritera mer plockvänliga platser i ställagen saknas även. Här är jag medveten om att min funktion som gör urvalet bör ligga i funktionsmodulen och inte i cli-modulen men de problem jag mötte tog mycket tid att lösa och jag lämnade det som ni kan se.

För att avgöra hur och var produkterna ska minska på lagret vid skickad order finns en foreach loop som hanterar varje produkt i ordern men först görs en split på lagerplatsen med ", " som är vad som separerar lagerplatserna om det är fler, efter den group_concat vi gör i tabellvyn för datan. En if-sats avgör vi sedan längden på ursprungslagerplatsen då mer än åtta tecken indikerar att det är fler än en plats. Om vi endast har en plats delas den upp sedan tas antal beställda produkter bort från hyllan. Om har fler platser kör vi en whileloop för att kunna stegvis räkna av det beställda antalet från hyllorna. Jag skapade en funktion som används i loopen där vi får ut antalet på hyllan som jag skriver till en variabel. Vi räknar stegvis uppåt i indexeringen för den första spliten vi gjorde. Vi gör även en split på "-" som delar upp lagerplatsen för att kunna tabort produkter från hyllorna. Sen gör jag ett avgörande med en if-sats om vad som är kvar från det antal beställda produkterna och minskar hyllans saldo med antingen allt eller vad som är kvar att tabort.

Jag har implementerat min faktura i webbklienten för krav 3 med status för betalning, priser per orderrad och totalpriset för ordern. Vi summerar orderrader i vyn genom att multiplicerad antal produkter med styckpriset. För betalningsstatusen har jag skapat en funktion till som hanterar det likt den orderstatus vi gjorde tidigare. Det finns en if-sats som räddar utskriften i vyn om ett null värde pressenteras då null-värden komplicerar utskriften men samtidigt är default värde för våra tidsstämplar, samma sak gör jag med skickad statusen. När ordern skickas till kund ändras status för om den är skickad eller ej och ett datum anges när den blev skickad. Man kan via terminalklienten "betala" eller ange att en order är betald ett visst datum och då skrivs även det ut med hjälp av yttligare en funktion i databasen. Funktionerna är mycket lika och presenterar endast en utskrift från vetskapen om det finns eller inte finns ett värde på angivna kolumner.

Jag tycker att kursen har varit väldigt intressant och väl utformad för att ha så goda förutsättningar som möjligt att lära sig mycket i ett högt tempo. Vi har lärt koda med SQL för databashanteraren MySQL eller MariaDB (som var studentens val). Vi har lärt oss hur man med en process som heter ER-modellering tar sina tankar om hur en databas ska vara med en konceptuella modell till hur den behöver fungera i en logiskt modell som sedan blir grunden till den fysiska modell vi bygger. Vi har använt Node.js för att kunna köra JavaScript kod enklare och implementera plugins som Express.js för hantering av databaser i en webbaserad miljö. Vi har implementerat användningen av Embedded JavaScript som är ett templating språk för att lättare inkludera JS-kod för att bygga och utför lite avancerade funktioner på html-sidor som är slutdestinationen för den data vi hämtar i databasen vi skapat. Jag har garanterat glömt några saker här som kursen omfattar men jag tycker att den har varit så gott som heltäckande på området och det har även funnits upplysningar om saker att lära sig vid sidan om kursens omfattning som finns i kurslitteraturen för att uppnå ännu bättre resultat på de olika delarna.

Jag måste uttrycka att kurslitteraturen har varit väldigt bra i den här kursen. Till en början tittade jag på boken Databasteknik av Tomas Padron-MacCarthy & Tore Risch som en oläslig tegelsten liknande bibeln eller annan oläslig form. Mina tankar var ungefär att det här kommer bli bland det jobbigaste jag någonsin har läst i mitt liv till att öppna boken och påbörja min väg igenom den där jag snabbt fann att den är riktigt bra. Boken är till stor fördel skriven på svenska även om jag inte ser stora hinder med att läsa kurslitteratur på engelska men det bidrar till en lättare och bättre genomgång av boken. Den är mycket välskriven i min mening och har många bra kodexempel som guidar läsaren genom materialet till en god förståelse av databasteknik. Mycket bra val av kurslitteratur, men det visste ni ju redan!

Slutligen vill jag tacka för väl utformade föreläsningar med mycket teori och mycket kodande. Ni har gjort ett bra arbete med hur informationen presenteras och förklaras med många förtydliganden av bitar som kan vara lite svårare att greppa för en ovan databasadministratör, för det är ju något i den riktningen vi nu kanske kan bli. Jag vill även tacka för ett mycket bra stöd vid behov av hjälp och som alltid i våra distanskurser har ni gjort det där lilla extra för att hjälpa mig att komma förbi de svårigheter som varit. Stort tack till Mikael, Niklas & Kenneth! (det tacket inkulderar även andra som jag kanske inte ser på skärmen om de har varit inblandade i utformandet och utförandet av kursen).




[Dropbox länk till redovisningsvideon](https://www.dropbox.com/s/9ni09u0zheh3ca0/Redovisning%20Databas%20tentamen%20try3.mp4?dl=0).